import{S as t,i as e,s as n,e as s,b as a,c as l,f as i,a as o,o as c,d as r,n as u,g as d,v as m,C as p,t as h,h as f,l as x,j as y,k as b,r as g,D as v,m as k}from"./main.js";import{c as T,d as C}from"./store-a83f109a.js";import{p as w}from"./fetch-d9c99915.js";function F(t,e,n){const s=t.slice();return s[14]=e[n],s[15]=e,s[16]=n,s}function N(t,e,n){const s=t.slice();return s[14]=e[n],s[17]=e,s[18]=n,s}function j(t){let e;function n(t,e){return 0==t[3]?M:L}let o=n(t),c=o(t);return{c(){e=s("div"),c.c(),a(e,"id","checkout"),a(e,"class","container rel")},m(t,n){l(t,e,n),c.m(e,null)},p(t,s){o===(o=n(t))&&c?c.p(t,s):(c.d(1),c=o(t),c&&(c.c(),c.m(e,null)))},d(t){t&&i(e),c.d()}}}function L(t){let e,n,a;function r(t,e){return"number"!=typeof t[3]?q:$}let u=r(t),d=u(t);return{c(){e=s("h1"),e.textContent="Kiitos tilauksesta",n=o(),d.c(),a=c()},m(t,s){l(t,e,s),l(t,n,s),d.m(t,s),l(t,a,s)},p(t,e){u===(u=r(t))&&d?d.p(t,e):(d.d(1),d=u(t),d&&(d.c(),d.m(a.parentNode,a)))},d(t){t&&i(e),t&&i(n),d.d(t),t&&i(a)}}}function M(t){let e,n,u,d,m,p,f,b,g,T,C,w,j,L,M,$,q,S,z,A,P,V,Y,B,D,E,X,G,Q,R,U,W,Z,_,tt,et,nt,st,at,lt,it,ot,ct,rt,ut,dt,mt=t[1].total.toFixed(2)+"",pt=t[5].toFixed(2)+"",ht=t[2].toFixed(2)+"",ft=t[4].body&&H(t),xt=t[1].products,yt=[];for(let e=0;e<xt.length;e+=1)yt[e]=K(N(t,xt,e));let bt=t[0].distance&&I(t),gt=t[8],vt=[];for(let e=0;e<gt.length;e+=1)vt[e]=J(F(t,gt,e));let kt=t[1].customer.street&&t[1].customer.postal&&t[1].customer.area&&O(t);return{c(){ft&&ft.c(),e=o(),n=s("div"),u=s("div"),d=s("h2"),d.textContent="Tuotteet",m=o(),p=s("table"),f=s("thead"),f.innerHTML='<tr><th class="tl">Tuote</th> \n\t\t\t\t\t\t\t\t<th class="tc">Hinta</th> \n\t\t\t\t\t\t\t\t<th class="tc">Määrä</th> \n\t\t\t\t\t\t\t\t<th class="tc">Yhteensä</th> \n\t\t\t\t\t\t\t\t<th></th></tr>',b=o(),g=s("tbody");for(let t=0;t<yt.length;t+=1)yt[t].c();T=o(),C=s("div"),w=s("h2"),w.textContent="Maksutiedot",j=o(),L=s("table"),M=s("tbody"),$=s("tr"),q=s("td"),q.textContent="Tuotteet yhteensä",S=o(),z=s("td"),A=h(mt),P=h(" €"),V=o(),bt&&bt.c(),Y=o(),B=s("tr"),D=s("td"),D.textContent="ALV 10%",E=o(),X=s("td"),G=h(pt),Q=h(" €"),R=o(),U=s("tr"),W=s("td"),W.textContent="Tilaus yhteensä",Z=o(),_=s("td"),tt=h(ht),et=h(" €"),nt=o(),st=s("form"),at=s("div"),lt=s("h2"),lt.textContent="Asiakastiedot",it=o(),ot=s("div");for(let t=0;t<vt.length;t+=1)vt[t].c();ct=o(),kt&&kt.c(),rt=c(),a(p,"id","productList"),a(p,"class","w100"),a(p,"rules","rows"),a(u,"class","item"),a(q,"class","label tl"),a(z,"class","value tr"),a(D,"class","label tl"),a(X,"class","value tr"),a(W,"class","label tl"),a(_,"class","value tr"),a(L,"class","w100"),a(C,"id","paymentInfo"),a(C,"class","item"),a(n,"id","tables"),a(n,"class","grid"),a(ot,"class","grid"),a(at,"id","client"),a(at,"class","item"),a(st,"class","items")},m(s,a){ft&&ft.m(s,a),l(s,e,a),l(s,n,a),r(n,u),r(u,d),r(u,m),r(u,p),r(p,f),r(p,b),r(p,g);for(let t=0;t<yt.length;t+=1)yt[t].m(g,null);r(n,T),r(n,C),r(C,w),r(C,j),r(C,L),r(L,M),r(M,$),r($,q),r($,S),r($,z),r(z,A),r(z,P),r(M,V),bt&&bt.m(M,null),r(M,Y),r(M,B),r(B,D),r(B,E),r(B,X),r(X,G),r(X,Q),r(M,R),r(M,U),r(U,W),r(U,Z),r(U,_),r(_,tt),r(_,et),l(s,nt,a),l(s,st,a),r(st,at),r(at,lt),r(at,it),r(at,ot);for(let t=0;t<vt.length;t+=1)vt[t].m(ot,null);l(s,ct,a),kt&&kt.m(s,a),l(s,rt,a),ut||(dt=x(st,"submit",v(t[9])),ut=!0)},p(t,n){if(t[4].body?ft?ft.p(t,n):(ft=H(t),ft.c(),ft.m(e.parentNode,e)):ft&&(ft.d(1),ft=null),130&n){let e;for(xt=t[1].products,e=0;e<xt.length;e+=1){const s=N(t,xt,e);yt[e]?yt[e].p(s,n):(yt[e]=K(s),yt[e].c(),yt[e].m(g,null))}for(;e<yt.length;e+=1)yt[e].d(1);yt.length=xt.length}if(2&n&&mt!==(mt=t[1].total.toFixed(2)+"")&&y(A,mt),t[0].distance?bt?bt.p(t,n):(bt=I(t),bt.c(),bt.m(M,Y)):bt&&(bt.d(1),bt=null),32&n&&pt!==(pt=t[5].toFixed(2)+"")&&y(G,pt),4&n&&ht!==(ht=t[2].toFixed(2)+"")&&y(tt,ht),258&n){let e;for(gt=t[8],e=0;e<gt.length;e+=1){const s=F(t,gt,e);vt[e]?vt[e].p(s,n):(vt[e]=J(s),vt[e].c(),vt[e].m(ot,null))}for(;e<vt.length;e+=1)vt[e].d(1);vt.length=gt.length}t[1].customer.street&&t[1].customer.postal&&t[1].customer.area?kt?kt.p(t,n):(kt=O(t),kt.c(),kt.m(rt.parentNode,rt)):kt&&(kt.d(1),kt=null)},d(t){ft&&ft.d(t),t&&i(e),t&&i(n),k(yt,t),bt&&bt.d(),t&&i(nt),t&&i(st),k(vt,t),t&&i(ct),kt&&kt.d(t),t&&i(rt),ut=!1,dt()}}}function $(t){let e,n,a,o,c,u;return{c(){e=s("p"),n=h("Tilaus on vahvistettu ja tilaustiedot on lähetetty\n\t\t\t\t\tsähköpostiin.\n\t\t\t\t\t"),a=s("br"),o=h("\n\t\t\t\t\tTilausnumerosi on "),c=h(t[3]),u=h(".")},m(t,s){l(t,e,s),r(e,n),r(e,a),r(e,o),r(e,c),r(e,u)},p(t,e){8&e&&y(c,t[3])},d(t){t&&i(e)}}}function q(t){let e,n;return{c(){e=s("p"),n=h(t[3])},m(t,s){l(t,e,s),r(e,n)},p(t,e){8&e&&y(n,t[3])},d(t){t&&i(e)}}}function H(t){let e,n=t[4].body+"";return{c(){e=s("div"),a(e,"class","body")},m(t,s){l(t,e,s),e.innerHTML=n},p(t,s){16&s&&n!==(n=t[4].body+"")&&(e.innerHTML=n)},d(t){t&&i(e)}}}function S(t){let e,n,c,u,d,m,p,v,k,T,C,w,F,N,j,L,M,$,q,H,S,K,I,J,O,P,V,Y,B,D=t[14].title+"",E=t[14].price2.toFixed(2)+"",X=t[14].total.toFixed(2)+"",G=t[14].size&&z(t),Q=t[14].id&&A(t);function R(){t[10].call($,t[18])}function U(){return t[11](t[18])}return{c(){e=s("tr"),n=s("td"),c=s("strong"),u=h(D),d=o(),G&&G.c(),m=o(),p=s("br"),v=o(),Q&&Q.c(),k=o(),T=s("td"),C=s("span"),C.textContent="Hinta:",w=o(),F=h(E),N=o(),j=s("td"),L=s("span"),L.textContent="Määrä:",M=o(),$=s("input"),q=o(),H=s("td"),S=s("span"),S.textContent="Yhteensä:",K=o(),I=h(X),J=o(),O=s("td"),P=s("button"),P.textContent="X",V=o(),a(n,"class","product tl"),a(T,"class","price tc pt"),a($,"type","number"),a($,"name","amount"),a(j,"class","amount tc"),a(H,"class","total tc pt"),a(P,"class","del noBor"),a(O,"class","tr pt")},m(s,a){l(s,e,a),r(e,n),r(n,c),r(c,u),r(c,d),G&&G.m(c,null),r(n,m),r(n,p),r(n,v),Q&&Q.m(n,null),r(e,k),r(e,T),r(T,C),r(T,w),r(T,F),r(e,N),r(e,j),r(j,L),r(j,M),r(j,$),f($,t[1].products[t[18]].amount),r(e,q),r(e,H),r(H,S),r(H,K),r(H,I),r(e,J),r(e,O),r(O,P),r(e,V),Y||(B=[x($,"input",R),x(P,"click",U)],Y=!0)},p(e,s){t=e,2&s&&D!==(D=t[14].title+"")&&y(u,D),t[14].size?G?G.p(t,s):(G=z(t),G.c(),G.m(c,null)):G&&(G.d(1),G=null),t[14].id?Q?Q.p(t,s):(Q=A(t),Q.c(),Q.m(n,null)):Q&&(Q.d(1),Q=null),2&s&&E!==(E=t[14].price2.toFixed(2)+"")&&y(F,E),2&s&&b($.value)!==t[1].products[t[18]].amount&&f($,t[1].products[t[18]].amount),2&s&&X!==(X=t[14].total.toFixed(2)+"")&&y(I,X)},d(t){t&&i(e),G&&G.d(),Q&&Q.d(),Y=!1,g(B)}}}function z(t){let e,n,s=t[14].size+"";return{c(){e=h("- "),n=h(s)},m(t,s){l(t,e,s),l(t,n,s)},p(t,e){2&e&&s!==(s=t[14].size+"")&&y(n,s)},d(t){t&&i(e),t&&i(n)}}}function A(t){let e,n,a=t[14].id+"";return{c(){e=s("small"),n=h(a)},m(t,s){l(t,e,s),r(e,n)},p(t,e){2&e&&a!==(a=t[14].id+"")&&y(n,a)},d(t){t&&i(e)}}}function K(t){let e,n=null!=t[14]&&S(t);return{c(){n&&n.c(),e=c()},m(t,s){n&&n.m(t,s),l(t,e,s)},p(t,s){null!=t[14]?n?n.p(t,s):(n=S(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&i(e)}}}function I(t){let e,n,c,u,d,m,p,f,x=t[0].distance.text+"",b=t[0].price.toFixed(2)+"";return{c(){e=s("tr"),n=s("td"),c=h("Toimitus, "),u=h(x),d=o(),m=s("td"),p=h(b),f=h(" €"),a(n,"class","label tl"),a(m,"class","value tr")},m(t,s){l(t,e,s),r(e,n),r(n,c),r(n,u),r(e,d),r(e,m),r(m,p),r(m,f)},p(t,e){1&e&&x!==(x=t[0].distance.text+"")&&y(u,x),1&e&&b!==(b=t[0].price.toFixed(2)+"")&&y(p,b)},d(t){t&&i(e)}}}function J(t){let e,n,c,u,d,m,p,y,b,g=t[14].title+"";function v(){t[12].call(m,t[14])}return{c(){e=s("div"),n=s("label"),c=s("span"),u=h(g),d=o(),m=s("input"),p=o(),a(c,"class","block"),a(m,"id",t[14].name),a(m,"class","w100"),a(m,"name",t[14].name),m.required=!0,a(e,"class","item")},m(s,a){l(s,e,a),r(e,n),r(n,c),r(c,u),r(n,d),r(n,m),f(m,t[1].customer[t[14].name]),r(e,p),y||(b=x(m,"input",v),y=!0)},p(e,n){t=e,258&n&&m.value!==t[1].customer[t[14].name]&&f(m,t[1].customer[t[14].name])},d(t){t&&i(e),y=!1,b()}}}function O(t){let e;function n(t,e){return t[0].distance?V:P}let o=n(t),c=o(t);return{c(){e=s("div"),c.c(),a(e,"id","payment"),a(e,"class","tc")},m(t,n){l(t,e,n),c.m(e,null)},p(t,s){o===(o=n(t))&&c?c.p(t,s):(c.d(1),c=o(t),c&&(c.c(),c.m(e,null)))},d(t){t&&i(e),c.d()}}}function P(t){let e,n,o;return{c(){e=s("button"),e.textContent="Laske tomituskulut",a(e,"id","ready"),a(e,"class","end"),a(e,"name","shipping")},m(s,a){l(s,e,a),n||(o=x(e,"click",t[13]),n=!0)},p:u,d(t){t&&i(e),n=!1,o()}}}function V(t){let e;return{c(){e=s("button"),e.textContent="Vahvista tilaus",a(e,"id","ready"),a(e,"class","end"),a(e,"name","ready"),a(e,"type","submit")},m(t,n){l(t,e,n)},p:u,d(t){t&&i(e)}}}function Y(t){let e,n,d,m=t[1].products[0]&&j(t);return{c(){e=s("meta"),n=o(),m&&m.c(),d=c(),document.title="Kassa - Tervetuloa maksamaan",a(e,"name","googlebot"),a(e,"content","noindex")},m(t,s){r(document.head,e),l(t,n,s),m&&m.m(t,s),l(t,d,s)},p(t,[e]){t[1].products[0]?m?m.p(t,e):(m=j(t),m.c(),m.m(d.parentNode,d)):m&&(m.d(1),m=null)},i:u,o:u,d(t){i(e),t&&i(n),m&&m.d(t),t&&i(d)}}}function B(t,e,n){let s,a,l,i;d(t,T,(t=>n(1,l=t))),d(t,C,(t=>n(4,i=t))),l.products[0]||window.location.replace("/"),m(T,l.customer={name1:"Timo",name2:"Anttila",street:"Testikuja 8",postal:37130,area:"Nokia",phone:"0407746121",email:"timo@tuspe.com"},l),l.customer||m(T,l.customer={name1:"Timo",name2:"Anttila",street:"Testikuja 8",postal:37130,area:"Nokia",phone:"0407746121",email:"timo@tuspe.com",distance:{},shipping:""},l),m(C,i={},i);let o=0,c={price:0};function r(t,e){w(t,e).then((t=>{t.redirect||t.message?void 0!==t.redirect?window.location.replace(t.redirect):t.message&&n(3,o=t.message):t.distance?n(0,c.distance=t.distance,c):C.set(t)}))}function u(t){m(T,l.products=l.products.filter(((e,n)=>n!==parseInt(t)&&null!=e)).sort(),l)}p((async()=>{r("path=kassa")}));let h=[{title:"Etunimi",type:"text",name:"name1",min:2,max:30,req:1},{title:"Sukunimi",type:"text",name:"name2",min:2,max:30,req:1},{title:"Puhelin",type:"text",name:"phone",min:5,max:15,req:1},{title:"Sähköposti",type:"email",name:"email",min:6,max:100,req:1},{title:"Katuosoite",type:"text",name:"street",min:5,max:50},{title:"Postinumero",type:"text",name:"postal",min:5,max:5},{title:"Kaupunki",type:"text",name:"area",min:3,max:50}];if(window.location.search){let t=window.location.search.substr(1).split("=");o="id"==t[0]?parseInt(t[1]):0}return t.$$.update=()=>{3&t.$$.dirty&&n(2,s=l.total+c.price),4&t.$$.dirty&&n(5,a=.1*s)},[c,l,s,o,i,a,r,u,h,async function(t){r("path=kassa&payment=1",{cart:JSON.stringify(l.products),delivery:JSON.stringify(c),price:s,vat:a})},function(t){l.products[t].amount=b(this.value),T.set(l)},t=>u(t),function(t){l.customer[t.name]=this.value,T.set(l),n(8,h)},()=>r("path=matka",{address:l.customer.street+"+"+l.customer.postal+"+"+l.customer.area})]}export default class extends t{constructor(t){super(),e(this,t,B,Y,n,{})}}
//# sourceMappingURL=kassa-ca5bde99.js.map
