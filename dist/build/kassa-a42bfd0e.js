import{S as t,i as e,s as n,a as l,e as s,b as a,c as i,A as r,B as c,z as o,f as d,g as u,C as m,D as p,q as v,k as x,E as f,o as h,n as g,t as y,d as j,h as b,l as F,j as k,r as C,F as $,G as w,H as T,I as H,J as M,m as L,K as S}from"./main.js";import{a as q,d as K,c as z}from"./store-dcd02ba1.js";class N extends t{constructor(t){super(),e(this,t,null,null,n,{})}}function I(t,e,n){const l=t.slice();return l[6]=e[n],l}function A(t,e,n){const l=t.slice();return l[6]=e[n],l}function B(t,e,n){const l=t.slice();return l[6]=e[n],l[18]=e,l[19]=n,l}function E(t){let e,n,a;function r(t,e){return"number"!=typeof t[3]?O:D}let c=r(t),o=c(t);return{c(){e=s("h1"),e.textContent="Kiitos tilauksesta",n=l(),o.c(),a=h()},m(t,l){i(t,e,l),i(t,n,l),o.m(t,l),i(t,a,l)},p(t,e){c===(c=r(t))&&o?o.p(t,e):(o.d(1),o=c(t),o&&(o.c(),o.m(a.parentNode,a)))},i:g,o:g,d(t){t&&d(e),t&&d(n),o.d(t),t&&d(a)}}}function J(t){let e,n,u,m,v,x,f,h,g,b,C,$,w,T,H,M,q,K,z,N,A,E,J,D,O,V,Y,G,R,Z,_,tt,et,nt,lt,st,at,it,rt,ct,ot,dt,ut,mt,pt,vt,xt,ft,ht=t[1].total.toFixed(2)+"",gt=t[5].toFixed(2)+"",yt=t[2].toFixed(2)+"",jt=t[4].body&&P(t),bt=t[1].products,Ft=[];for(let e=0;e<bt.length;e+=1)Ft[e]=X(B(t,bt,e));let kt=t[4].delivery&&Q(t),Ct=t[0].price>0&&U(t),$t=t[8],wt=[];for(let e=0;e<$t.length;e+=1)wt[e]=W(I(t,$t,e));return{c(){jt&&jt.c(),e=l(),n=s("div"),u=s("div"),m=s("h2"),m.textContent="Tuotteet",v=l(),x=s("table"),f=s("thead"),f.innerHTML='<tr><th class="tl svelte-1gmxvjr">Tuote</th> \n\t\t\t\t\t\t\t<th class="tc svelte-1gmxvjr">Hinta</th> \n\t\t\t\t\t\t\t<th class="tc svelte-1gmxvjr">Määrä</th> \n\t\t\t\t\t\t\t<th class="tc svelte-1gmxvjr">Yhteensä</th> \n\t\t\t\t\t\t\t<th class="svelte-1gmxvjr"></th></tr>',h=l(),g=s("tbody");for(let t=0;t<Ft.length;t+=1)Ft[t].c();b=l(),kt&&kt.c(),C=l(),$=s("div"),w=s("h2"),w.textContent="Maksutiedot",T=l(),H=s("table"),M=s("tbody"),q=s("tr"),K=s("td"),K.textContent="Tuotteet yhteensä",z=l(),N=s("td"),A=y(ht),E=y(" €"),J=l(),Ct&&Ct.c(),D=l(),O=s("tr"),V=s("td"),V.textContent="ALV 10%",Y=l(),G=s("td"),R=y(gt),Z=y(" €"),_=l(),tt=s("tr"),et=s("td"),et.textContent="Tilaus yhteensä",nt=l(),lt=s("td"),st=y(yt),at=y(" €"),it=l(),rt=s("form"),ct=s("div"),ot=s("h2"),ot.textContent="Asiakastiedot",dt=l(),ut=s("div");for(let t=0;t<wt.length;t+=1)wt[t].c();mt=l(),pt=s("div"),pt.innerHTML='<button id="ready" class="end svelte-1gmxvjr" name="ready" type="submit">Vahvista tilaus</button>',a(x,"id","productList"),a(x,"class","w100"),a(x,"rules","rows"),a(u,"class","item"),a(K,"class","label tl svelte-1gmxvjr"),a(N,"class","value tr svelte-1gmxvjr"),a(V,"class","label tl svelte-1gmxvjr"),a(G,"class","value tr svelte-1gmxvjr"),a(et,"class","label tl svelte-1gmxvjr"),a(lt,"class","value tr svelte-1gmxvjr"),a(H,"class","w100"),a($,"id","paymentInfo"),a($,"class","item"),a(n,"id","tables"),a(n,"class","grid svelte-1gmxvjr"),a(ut,"class","grid svelte-1gmxvjr"),a(ct,"id","client"),a(ct,"class","item svelte-1gmxvjr"),a(pt,"id","payment"),a(pt,"class","tc"),a(rt,"class","items")},m(l,s){jt&&jt.m(l,s),i(l,e,s),i(l,n,s),j(n,u),j(u,m),j(u,v),j(u,x),j(x,f),j(x,h),j(x,g);for(let t=0;t<Ft.length;t+=1)Ft[t].m(g,null);j(u,b),kt&&kt.m(u,null),j(n,C),j(n,$),j($,w),j($,T),j($,H),j(H,M),j(M,q),j(q,K),j(q,z),j(q,N),j(N,A),j(N,E),j(M,J),Ct&&Ct.m(M,null),j(M,D),j(M,O),j(O,V),j(O,Y),j(O,G),j(G,R),j(G,Z),j(M,_),j(M,tt),j(tt,et),j(tt,nt),j(tt,lt),j(lt,st),j(lt,at),i(l,it,s),i(l,rt,s),j(rt,ct),j(ct,ot),j(ct,dt),j(ct,ut);for(let t=0;t<wt.length;t+=1)wt[t].m(ut,null);j(rt,mt),j(rt,pt),vt=!0,xt||(ft=F(rt,"submit",S(t[9])),xt=!0)},p(t,n){if(t[4].body?jt?jt.p(t,n):(jt=P(t),jt.c(),jt.m(e.parentNode,e)):jt&&(jt.d(1),jt=null),130&n){let e;for(bt=t[1].products,e=0;e<bt.length;e+=1){const l=B(t,bt,e);Ft[e]?Ft[e].p(l,n):(Ft[e]=X(l),Ft[e].c(),Ft[e].m(g,null))}for(;e<Ft.length;e+=1)Ft[e].d(1);Ft.length=bt.length}if(t[4].delivery?kt?(kt.p(t,n),16&n&&o(kt,1)):(kt=Q(t),kt.c(),o(kt,1),kt.m(u,null)):kt&&(p(),r(kt,1,1,(()=>{kt=null})),c()),(!vt||2&n)&&ht!==(ht=t[1].total.toFixed(2)+"")&&k(A,ht),t[0].price>0?Ct?Ct.p(t,n):(Ct=U(t),Ct.c(),Ct.m(M,D)):Ct&&(Ct.d(1),Ct=null),(!vt||32&n)&&gt!==(gt=t[5].toFixed(2)+"")&&k(R,gt),(!vt||4&n)&&yt!==(yt=t[2].toFixed(2)+"")&&k(st,yt),256&n){let e;for($t=t[8],e=0;e<$t.length;e+=1){const l=I(t,$t,e);wt[e]?wt[e].p(l,n):(wt[e]=W(l),wt[e].c(),wt[e].m(ut,null))}for(;e<wt.length;e+=1)wt[e].d(1);wt.length=$t.length}},i(t){vt||(o(kt),vt=!0)},o(t){r(kt),vt=!1},d(t){jt&&jt.d(t),t&&d(e),t&&d(n),L(Ft,t),kt&&kt.d(),Ct&&Ct.d(),t&&d(it),t&&d(rt),L(wt,t),xt=!1,ft()}}}function D(t){let e,n,l,a;return{c(){e=s("p"),n=y("Tilaus on vahvistettu ja tilaustiedot on lähetetty sähköpostiin.\n\t\t\t\tTilausnumerosi on "),l=y(t[3]),a=y(".")},m(t,s){i(t,e,s),j(e,n),j(e,l),j(e,a)},p(t,e){8&e&&k(l,t[3])},d(t){t&&d(e)}}}function O(t){let e,n;return{c(){e=s("p"),n=y(t[3])},m(t,l){i(t,e,l),j(e,n)},p(t,e){8&e&&k(n,t[3])},d(t){t&&d(e)}}}function P(t){let e,n=t[4].body+"";return{c(){e=s("div"),a(e,"class","body")},m(t,l){i(t,e,l),e.innerHTML=n},p(t,l){16&l&&n!==(n=t[4].body+"")&&(e.innerHTML=n)},d(t){t&&d(e)}}}function V(t){let e,n,r,c,o,u,m,p,v,f,h,g,$,w,T,H,M,L,S,q,K,z,N,I,A,B,E,J,D,O=t[6].title+"",P=t[6].price2.toFixed(2)+"",V=t[6].total.toFixed(2)+"",X=t[6].size&&Y(t),Q=t[6].id&&G(t);function R(){t[10].call(L,t[19])}function U(){return t[11](t[19])}return{c(){e=s("tr"),n=s("td"),r=s("strong"),c=y(O),o=l(),X&&X.c(),u=l(),m=s("br"),p=l(),Q&&Q.c(),v=l(),f=s("td"),h=s("span"),h.textContent="Hinta:",g=l(),$=y(P),w=l(),T=s("td"),H=s("span"),H.textContent="Määrä:",M=l(),L=s("input"),S=l(),q=s("td"),K=s("span"),K.textContent="Yhteensä:",z=l(),N=y(V),I=l(),A=s("td"),B=s("button"),B.textContent="X",E=l(),a(n,"class","product tl svelte-1gmxvjr"),a(h,"class","svelte-1gmxvjr"),a(f,"class","price tc pt svelte-1gmxvjr"),a(H,"class","svelte-1gmxvjr"),a(L,"type","number"),a(L,"name","amount"),a(L,"class","svelte-1gmxvjr"),a(T,"class","amount tc svelte-1gmxvjr"),a(K,"class","svelte-1gmxvjr"),a(q,"class","total tc pt svelte-1gmxvjr"),a(B,"class","del noBor"),a(A,"class","tr pt svelte-1gmxvjr")},m(l,s){i(l,e,s),j(e,n),j(n,r),j(r,c),j(r,o),X&&X.m(r,null),j(n,u),j(n,m),j(n,p),Q&&Q.m(n,null),j(e,v),j(e,f),j(f,h),j(f,g),j(f,$),j(e,w),j(e,T),j(T,H),j(T,M),j(T,L),b(L,t[1].products[t[19]].amount),j(e,S),j(e,q),j(q,K),j(q,z),j(q,N),j(e,I),j(e,A),j(A,B),j(e,E),J||(D=[F(L,"input",R),F(B,"click",U)],J=!0)},p(e,l){t=e,2&l&&O!==(O=t[6].title+"")&&k(c,O),t[6].size?X?X.p(t,l):(X=Y(t),X.c(),X.m(r,null)):X&&(X.d(1),X=null),t[6].id?Q?Q.p(t,l):(Q=G(t),Q.c(),Q.m(n,null)):Q&&(Q.d(1),Q=null),2&l&&P!==(P=t[6].price2.toFixed(2)+"")&&k($,P),2&l&&x(L.value)!==t[1].products[t[19]].amount&&b(L,t[1].products[t[19]].amount),2&l&&V!==(V=t[6].total.toFixed(2)+"")&&k(N,V)},d(t){t&&d(e),X&&X.d(),Q&&Q.d(),J=!1,C(D)}}}function Y(t){let e,n,l=t[6].size+"";return{c(){e=y("- "),n=y(l)},m(t,l){i(t,e,l),i(t,n,l)},p(t,e){2&e&&l!==(l=t[6].size+"")&&k(n,l)},d(t){t&&d(e),t&&d(n)}}}function G(t){let e,n,l=t[6].id+"";return{c(){e=s("small"),n=y(l)},m(t,l){i(t,e,l),j(e,n)},p(t,e){2&e&&l!==(l=t[6].id+"")&&k(n,l)},d(t){t&&d(e)}}}function X(t){let e,n=null!=t[6]&&V(t);return{c(){n&&n.c(),e=h()},m(t,l){n&&n.m(t,l),i(t,e,l)},p(t,l){null!=t[6]?n?n.p(t,l):(n=V(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&d(e)}}}function Q(t){let e,n,u,m,v,x,f,h,g=t[4].delivery,y=[];for(let e=0;e<g.length;e+=1)y[e]=R(A(t,g,e));const b=t=>r(y[t],1,1,(()=>{y[t]=null}));return{c(){e=s("div"),n=s("label"),u=s("span"),u.innerHTML="<h2>Toimitustapa</h2>",m=l(),v=s("select");for(let t=0;t<y.length;t+=1)y[t].c();a(u,"class","block"),void 0===t[6]&&$((()=>t[12].call(v))),a(e,"id","shipping")},m(l,s){i(l,e,s),j(e,n),j(n,u),j(n,m),j(n,v);for(let t=0;t<y.length;t+=1)y[t].m(v,null);w(v,t[6]),x=!0,f||(h=F(v,"change",t[12]),f=!0)},p(t,e){if(16&e){let n;for(g=t[4].delivery,n=0;n<g.length;n+=1){const l=A(t,g,n);y[n]?(y[n].p(l,e),o(y[n],1)):(y[n]=R(l),y[n].c(),o(y[n],1),y[n].m(v,null))}for(p(),n=g.length;n<y.length;n+=1)b(n);c()}64&e&&w(v,t[6])},i(t){if(!x){for(let t=0;t<g.length;t+=1)o(y[t]);x=!0}},o(t){y=y.filter(Boolean);for(let t=0;t<y.length;t+=1)r(y[t]);x=!1},d(t){t&&d(e),L(y,t),f=!1,h()}}}function R(t){let e,n;return e=new N({props:{id:t[6].id,name:t[6].name,price:t[6].price}}),{c(){T(e.$$.fragment)},m(t,l){H(e,t,l),n=!0},p(t,n){const l={};16&n&&(l.id=t[6].id),16&n&&(l.name=t[6].name),16&n&&(l.price=t[6].price),e.$set(l)},i(t){n||(o(e.$$.fragment,t),n=!0)},o(t){r(e.$$.fragment,t),n=!1},d(t){M(e,t)}}}function U(t){let e,n,r,c,o,u,m=t[0].price.toFixed(2)+"";return{c(){e=s("tr"),n=s("td"),n.textContent="Kuljetus",r=l(),c=s("td"),o=y(m),u=y(" €"),a(n,"class","label tl svelte-1gmxvjr"),a(c,"class","value tr svelte-1gmxvjr")},m(t,l){i(t,e,l),j(e,n),j(e,r),j(e,c),j(c,o),j(c,u)},p(t,e){1&e&&m!==(m=t[0].price.toFixed(2)+"")&&k(o,m)},d(t){t&&d(e)}}}function W(t){let e,n,r,c,o,u,m,p=t[6].title+"";return{c(){e=s("div"),n=s("label"),r=s("span"),c=y(p),o=l(),u=s("input"),m=l(),a(r,"class","block"),a(u,"id",t[6].name),a(u,"class","w100 svelte-1gmxvjr"),a(u,"type",t[6].type),a(u,"name",t[6].name),a(u,"minlength",t[6].min),a(u,"maxlength",t[6].max),u.required=!0,a(e,"class","item")},m(t,l){i(t,e,l),j(e,n),j(n,r),j(r,c),j(n,o),j(n,u),j(e,m)},p:g,d(t){t&&d(e)}}}function Z(t){let e,n,u,m,v,x;document.title=e=_;const f=[J,E],h=[];function g(t,e){return 0==t[3]&&t[1].products[0]?0:1}return m=g(t),v=h[m]=f[m](t),{c(){n=l(),u=s("div"),v.c(),a(u,"id","checkout"),a(u,"class","container rel")},m(t,e){i(t,n,e),i(t,u,e),h[m].m(u,null),x=!0},p(t,[n]){(!x||0&n)&&e!==(e=_)&&(document.title=e);let l=m;m=g(t),m===l?h[m].p(t,n):(p(),r(h[l],1,1,(()=>{h[l]=null})),c(),v=h[m],v?v.p(t,n):(v=h[m]=f[m](t),v.c()),o(v,1),v.m(u,null))},i(t){x||(o(v),x=!0)},o(t){r(v),x=!1},d(t){t&&d(n),t&&d(u),h[m].d()}}}let _="Kassa";function tt(t,e,n){let l,s,a,i,r,c;u(t,q,(t=>n(13,i=t))),u(t,K,(t=>n(4,r=t))),u(t,z,(t=>n(1,c=t)));let o=0,d={price:0};function p(t){v(z,c.products=c.products.filter(((e,n)=>n!==parseInt(t)&&null!=e)).sort(),c)}m((async()=>{try{const t=await fetch(i+"?type=kassa");K.set(await t.json()),n(0,d=r.delivery.items[0])}catch(t){console.error(t)}}));let h=[{title:"Etunimi",type:"text",name:"name1",min:2,max:30,req:1},{title:"Sukunimi",type:"text",name:"name2",min:2,max:30,req:1},{title:"Puhelin",type:"text",name:"phone",min:5,max:15,req:1},{title:"Sähköposti",type:"email",name:"email",min:6,max:100,req:1},{title:"Katuosoite",type:"text",name:"street",min:5,max:50},{title:"Postinumero",type:"text",name:"postal",min:5,max:5},{title:"Kaupunki",type:"text",name:"area",min:3,max:50}];if(window.location.search){let t=window.location.search.substr(1).split("=");"id"==t[0]&&(o=parseInt(t[1]))}return t.$$.update=()=>{3&t.$$.dirty&&n(2,s=c.total+d.price),4&t.$$.dirty&&n(5,a=.1*s)},n(6,l=""),[d,c,s,o,r,a,l,p,h,async function(t){"undefined"!=typeof paymentSelected&&(v(z,c.method=paymentSelected,c),z.set(c));const e=new FormData;h.forEach((function(n){void 0!==t.target[n.name]&&e.append(n.name,t.target[n.name].value)})),e.append("cart",JSON.stringify(c.products)),e.append("delivery",JSON.stringify(d)),e.append("price",s),e.append("vat",a)},function(t){c.products[t].amount=x(this.value),z.set(c)},t=>p(t),function(){l=f(this),n(6,l)}]}export default class extends t{constructor(t){super(),e(this,t,tt,Z,n,{})}}
//# sourceMappingURL=kassa-a42bfd0e.js.map
