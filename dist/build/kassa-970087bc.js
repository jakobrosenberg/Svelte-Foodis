import{S as t,i as e,s as n,e as l,b as s,c as a,B as i,C as o,A as c,f as r,a as u,o as d,g as m,v as p,D as f,E as h,n as x,t as g,d as y,h as b,l as v,j as k,k as T,r as C,F as $,G as w,H as F,I as j,J as H,m as L,K as M,L as N}from"./main.js";import{c as K,d as q}from"./store-95cd318b.js";import{p as A}from"./fetch-c1b3b3cf.js";class S extends t{constructor(t){super(),e(this,t,null,null,n,{})}}function z(t,e,n){const l=t.slice();return l[5]=e[n],l[15]=e,l[16]=n,l}function I(t,e,n){const l=t.slice();return l[5]=e[n],l}function B(t,e,n){const l=t.slice();return l[5]=e[n],l[19]=e,l[20]=n,l}function J(t){let e,n,u,d;const m=[O,E],p=[];function f(t,e){return 0==t[2]?0:1}return n=f(t),u=p[n]=m[n](t),{c(){e=l("div"),u.c(),s(e,"id","checkout"),s(e,"class","container rel")},m(t,l){a(t,e,l),p[n].m(e,null),d=!0},p(t,l){let s=n;n=f(t),n===s?p[n].p(t,l):(h(),i(p[s],1,1,(()=>{p[s]=null})),o(),u=p[n],u?u.p(t,l):(u=p[n]=m[n](t),u.c()),c(u,1),u.m(e,null))},i(t){d||(c(u),d=!0)},o(t){i(u),d=!1},d(t){t&&r(e),p[n].d()}}}function E(t){let e,n,s;function i(t,e){return"number"!=typeof t[2]?V:P}let o=i(t),c=o(t);return{c(){e=l("h1"),e.textContent="Kiitos tilauksesta",n=u(),c.c(),s=d()},m(t,l){a(t,e,l),a(t,n,l),c.m(t,l),a(t,s,l)},p(t,e){o===(o=i(t))&&c?c.p(t,e):(c.d(1),c=o(t),c&&(c.c(),c.m(s.parentNode,s)))},i:x,o:x,d(t){t&&r(e),t&&r(n),c.d(t),t&&r(s)}}}function O(t){let e,n,d,m,p,f,b,T,C,$,w,F,j,H,N,K,q,A,S,I,J,E,O,P,V,D,G,X,U,Z,_,tt,et,nt,lt,st,at,it,ot,ct,rt,ut,dt,mt,pt,ft,ht,xt,gt=t[0].total.toFixed(2)+"",yt=t[4].toFixed(2)+"",bt=t[1].toFixed(2)+"",vt=t[3].body&&Y(t),kt=t[0].products,Tt=[];for(let e=0;e<kt.length;e+=1)Tt[e]=Q(B(t,kt,e));let Ct=t[3].delivery&&R(t),$t=t[6].price>0&&function(t){let e,n,i,o;return{c(){e=l("tr"),n=l("td"),n.textContent="Kuljetus",i=u(),o=l("td"),o.textContent=`${t[6].price.toFixed(2)} €`,s(n,"class","label tl"),s(o,"class","value tr")},m(t,l){a(t,e,l),y(e,n),y(e,i),y(e,o)},p:x,d(t){t&&r(e)}}}(t),wt=t[8],Ft=[];for(let e=0;e<wt.length;e+=1)Ft[e]=W(z(t,wt,e));return{c(){vt&&vt.c(),e=u(),n=l("div"),d=l("div"),m=l("h2"),m.textContent="Tuotteet",p=u(),f=l("table"),b=l("thead"),b.innerHTML='<tr><th class="tl">Tuote</th> \n\t\t\t\t\t\t\t\t<th class="tc">Hinta</th> \n\t\t\t\t\t\t\t\t<th class="tc">Määrä</th> \n\t\t\t\t\t\t\t\t<th class="tc">Yhteensä</th> \n\t\t\t\t\t\t\t\t<th></th></tr>',T=u(),C=l("tbody");for(let t=0;t<Tt.length;t+=1)Tt[t].c();$=u(),Ct&&Ct.c(),w=u(),F=l("div"),j=l("h2"),j.textContent="Maksutiedot",H=u(),N=l("table"),K=l("tbody"),q=l("tr"),A=l("td"),A.textContent="Tuotteet yhteensä",S=u(),I=l("td"),J=g(gt),E=g(" €"),O=u(),$t&&$t.c(),P=u(),V=l("tr"),D=l("td"),D.textContent="ALV 10%",G=u(),X=l("td"),U=g(yt),Z=g(" €"),_=u(),tt=l("tr"),et=l("td"),et.textContent="Tilaus yhteensä",nt=u(),lt=l("td"),st=g(bt),at=g(" €"),it=u(),ot=l("form"),ct=l("div"),rt=l("h2"),rt.textContent="Asiakastiedot",ut=u(),dt=l("div");for(let t=0;t<Ft.length;t+=1)Ft[t].c();mt=u(),pt=l("div"),pt.innerHTML='<button id="ready" class="end" name="ready" type="submit">Vahvista tilaus</button>',s(f,"id","productList"),s(f,"class","w100"),s(f,"rules","rows"),s(d,"class","item"),s(A,"class","label tl"),s(I,"class","value tr"),s(D,"class","label tl"),s(X,"class","value tr"),s(et,"class","label tl"),s(lt,"class","value tr"),s(N,"class","w100"),s(F,"id","paymentInfo"),s(F,"class","item"),s(n,"id","tables"),s(n,"class","grid"),s(dt,"class","grid"),s(ct,"id","client"),s(ct,"class","item"),s(pt,"id","payment"),s(pt,"class","tc"),s(ot,"class","items")},m(l,s){vt&&vt.m(l,s),a(l,e,s),a(l,n,s),y(n,d),y(d,m),y(d,p),y(d,f),y(f,b),y(f,T),y(f,C);for(let t=0;t<Tt.length;t+=1)Tt[t].m(C,null);y(d,$),Ct&&Ct.m(d,null),y(n,w),y(n,F),y(F,j),y(F,H),y(F,N),y(N,K),y(K,q),y(q,A),y(q,S),y(q,I),y(I,J),y(I,E),y(K,O),$t&&$t.m(K,null),y(K,P),y(K,V),y(V,D),y(V,G),y(V,X),y(X,U),y(X,Z),y(K,_),y(K,tt),y(tt,et),y(tt,nt),y(tt,lt),y(lt,st),y(lt,at),a(l,it,s),a(l,ot,s),y(ot,ct),y(ct,rt),y(ct,ut),y(ct,dt);for(let t=0;t<Ft.length;t+=1)Ft[t].m(dt,null);y(ot,mt),y(ot,pt),ft=!0,ht||(xt=v(ot,"submit",M(t[9])),ht=!0)},p(t,n){if(t[3].body?vt?vt.p(t,n):(vt=Y(t),vt.c(),vt.m(e.parentNode,e)):vt&&(vt.d(1),vt=null),129&n){let e;for(kt=t[0].products,e=0;e<kt.length;e+=1){const l=B(t,kt,e);Tt[e]?Tt[e].p(l,n):(Tt[e]=Q(l),Tt[e].c(),Tt[e].m(C,null))}for(;e<Tt.length;e+=1)Tt[e].d(1);Tt.length=kt.length}if(t[3].delivery?Ct?(Ct.p(t,n),8&n&&c(Ct,1)):(Ct=R(t),Ct.c(),c(Ct,1),Ct.m(d,null)):Ct&&(h(),i(Ct,1,1,(()=>{Ct=null})),o()),(!ft||1&n)&&gt!==(gt=t[0].total.toFixed(2)+"")&&k(J,gt),t[6].price>0&&$t.p(t,n),(!ft||16&n)&&yt!==(yt=t[4].toFixed(2)+"")&&k(U,yt),(!ft||2&n)&&bt!==(bt=t[1].toFixed(2)+"")&&k(st,bt),257&n){let e;for(wt=t[8],e=0;e<wt.length;e+=1){const l=z(t,wt,e);Ft[e]?Ft[e].p(l,n):(Ft[e]=W(l),Ft[e].c(),Ft[e].m(dt,null))}for(;e<Ft.length;e+=1)Ft[e].d(1);Ft.length=wt.length}},i(t){ft||(c(Ct),ft=!0)},o(t){i(Ct),ft=!1},d(t){vt&&vt.d(t),t&&r(e),t&&r(n),L(Tt,t),Ct&&Ct.d(),$t&&$t.d(),t&&r(it),t&&r(ot),L(Ft,t),ht=!1,xt()}}}function P(t){let e,n,s,i,o,c;return{c(){e=l("p"),n=g("Tilaus on vahvistettu ja tilaustiedot on lähetetty\n\t\t\t\t\tsähköpostiin.\n\t\t\t\t\t"),s=l("br"),i=g("\n\t\t\t\t\tTilausnumerosi on "),o=g(t[2]),c=g(".")},m(t,l){a(t,e,l),y(e,n),y(e,s),y(e,i),y(e,o),y(e,c)},p(t,e){4&e&&k(o,t[2])},d(t){t&&r(e)}}}function V(t){let e,n;return{c(){e=l("p"),n=g(t[2])},m(t,l){a(t,e,l),y(e,n)},p(t,e){4&e&&k(n,t[2])},d(t){t&&r(e)}}}function Y(t){let e,n=t[3].body+"";return{c(){e=l("div"),s(e,"class","body")},m(t,l){a(t,e,l),e.innerHTML=n},p(t,l){8&l&&n!==(n=t[3].body+"")&&(e.innerHTML=n)},d(t){t&&r(e)}}}function D(t){let e,n,i,o,c,d,m,p,f,h,x,$,w,F,j,H,L,M,N,K,q,A,S,z,I,B,J,E,O,P=t[5].title+"",V=t[5].price2.toFixed(2)+"",Y=t[5].total.toFixed(2)+"",D=t[5].size&&G(t),Q=t[5].id&&X(t);function R(){t[10].call(M,t[20])}function U(){return t[11](t[20])}return{c(){e=l("tr"),n=l("td"),i=l("strong"),o=g(P),c=u(),D&&D.c(),d=u(),m=l("br"),p=u(),Q&&Q.c(),f=u(),h=l("td"),x=l("span"),x.textContent="Hinta:",$=u(),w=g(V),F=u(),j=l("td"),H=l("span"),H.textContent="Määrä:",L=u(),M=l("input"),N=u(),K=l("td"),q=l("span"),q.textContent="Yhteensä:",A=u(),S=g(Y),z=u(),I=l("td"),B=l("button"),B.textContent="X",J=u(),s(n,"class","product tl"),s(h,"class","price tc pt"),s(M,"type","number"),s(M,"name","amount"),s(j,"class","amount tc"),s(K,"class","total tc pt"),s(B,"class","del noBor"),s(I,"class","tr pt")},m(l,s){a(l,e,s),y(e,n),y(n,i),y(i,o),y(i,c),D&&D.m(i,null),y(n,d),y(n,m),y(n,p),Q&&Q.m(n,null),y(e,f),y(e,h),y(h,x),y(h,$),y(h,w),y(e,F),y(e,j),y(j,H),y(j,L),y(j,M),b(M,t[0].products[t[20]].amount),y(e,N),y(e,K),y(K,q),y(K,A),y(K,S),y(e,z),y(e,I),y(I,B),y(e,J),E||(O=[v(M,"input",R),v(B,"click",U)],E=!0)},p(e,l){t=e,1&l&&P!==(P=t[5].title+"")&&k(o,P),t[5].size?D?D.p(t,l):(D=G(t),D.c(),D.m(i,null)):D&&(D.d(1),D=null),t[5].id?Q?Q.p(t,l):(Q=X(t),Q.c(),Q.m(n,null)):Q&&(Q.d(1),Q=null),1&l&&V!==(V=t[5].price2.toFixed(2)+"")&&k(w,V),1&l&&T(M.value)!==t[0].products[t[20]].amount&&b(M,t[0].products[t[20]].amount),1&l&&Y!==(Y=t[5].total.toFixed(2)+"")&&k(S,Y)},d(t){t&&r(e),D&&D.d(),Q&&Q.d(),E=!1,C(O)}}}function G(t){let e,n,l=t[5].size+"";return{c(){e=g("- "),n=g(l)},m(t,l){a(t,e,l),a(t,n,l)},p(t,e){1&e&&l!==(l=t[5].size+"")&&k(n,l)},d(t){t&&r(e),t&&r(n)}}}function X(t){let e,n,s=t[5].id+"";return{c(){e=l("small"),n=g(s)},m(t,l){a(t,e,l),y(e,n)},p(t,e){1&e&&s!==(s=t[5].id+"")&&k(n,s)},d(t){t&&r(e)}}}function Q(t){let e,n=null!=t[5]&&D(t);return{c(){n&&n.c(),e=d()},m(t,l){n&&n.m(t,l),a(t,e,l)},p(t,l){null!=t[5]?n?n.p(t,l):(n=D(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){n&&n.d(t),t&&r(e)}}}function R(t){let e,n,d,m,p,f,x,g,b=t[3].delivery,k=[];for(let e=0;e<b.length;e+=1)k[e]=U(I(t,b,e));const T=t=>i(k[t],1,1,(()=>{k[t]=null}));return{c(){e=l("div"),n=l("label"),d=l("span"),d.innerHTML="<h2>Toimitustapa</h2>",m=u(),p=l("select");for(let t=0;t<k.length;t+=1)k[t].c();s(d,"class","block"),void 0===t[5]&&$((()=>t[12].call(p))),s(e,"id","shipping")},m(l,s){a(l,e,s),y(e,n),y(n,d),y(n,m),y(n,p);for(let t=0;t<k.length;t+=1)k[t].m(p,null);w(p,t[5]),f=!0,x||(g=v(p,"change",t[12]),x=!0)},p(t,e){if(8&e){let n;for(b=t[3].delivery,n=0;n<b.length;n+=1){const l=I(t,b,n);k[n]?(k[n].p(l,e),c(k[n],1)):(k[n]=U(l),k[n].c(),c(k[n],1),k[n].m(p,null))}for(h(),n=b.length;n<k.length;n+=1)T(n);o()}32&e&&w(p,t[5])},i(t){if(!f){for(let t=0;t<b.length;t+=1)c(k[t]);f=!0}},o(t){k=k.filter(Boolean);for(let t=0;t<k.length;t+=1)i(k[t]);f=!1},d(t){t&&r(e),L(k,t),x=!1,g()}}}function U(t){let e,n;return e=new S({props:{id:t[5].id,name:t[5].name,price:t[5].price}}),{c(){F(e.$$.fragment)},m(t,l){j(e,t,l),n=!0},p(t,n){const l={};8&n&&(l.id=t[5].id),8&n&&(l.name=t[5].name),8&n&&(l.price=t[5].price),e.$set(l)},i(t){n||(c(e.$$.fragment,t),n=!0)},o(t){i(e.$$.fragment,t),n=!1},d(t){H(e,t)}}}function W(t){let e,n,i,o,c,d,m,p,f,h=t[5].title+"";function x(){t[13].call(d,t[5])}return{c(){e=l("div"),n=l("label"),i=l("span"),o=g(h),c=u(),d=l("input"),m=u(),s(i,"class","block"),s(d,"id",t[5].name),s(d,"class","w100"),s(d,"name",t[5].name),d.required=!0,s(e,"class","item")},m(l,s){a(l,e,s),y(e,n),y(n,i),y(i,o),y(n,c),y(n,d),b(d,t[0].customer[t[5].name]),y(e,m),p||(f=v(d,"input",x),p=!0)},p(e,n){t=e,257&n&&d.value!==t[0].customer[t[5].name]&&b(d,t[0].customer[t[5].name])},d(t){t&&r(e),p=!1,f()}}}function Z(t){let e,n,l,s;document.title=e=_;let m=t[0].products[0]&&J(t);return{c(){n=u(),m&&m.c(),l=d()},m(t,e){a(t,n,e),m&&m.m(t,e),a(t,l,e),s=!0},p(t,[n]){(!s||0&n)&&e!==(e=_)&&(document.title=e),t[0].products[0]?m?(m.p(t,n),1&n&&c(m,1)):(m=J(t),m.c(),c(m,1),m.m(l.parentNode,l)):m&&(h(),i(m,1,1,(()=>{m=null})),o())},i(t){s||(c(m),s=!0)},o(t){i(m),s=!1},d(t){t&&r(n),m&&m.d(t),t&&r(l)}}}let _="Kassa";function tt(t,e,n){let l,s,a,i,o;m(t,K,(t=>n(0,i=t))),m(t,q,(t=>n(3,o=t))),i.products[0]||window.location.replace("/"),p(K,i.customer={name1:"Timo",name2:"Anttila",street:"Testikuja 8",postal:37130,area:"Nokia",phone:"0407746121",email:"timo@tuspe.com"},i),i.customer||p(K,i.customer={name1:"Timo",name2:"Anttila",street:"Testikuja 8",postal:37130,area:"Nokia",phone:"0407746121",email:"timo@tuspe.com"},i),p(q,o={},o);let c=0,r={price:0};function u(t,e){A(t,e).then((t=>{t.redirect||t.message?void 0!==t.redirect?window.location.replace(t.redirect):t.message&&n(2,c=t.message):q.set(t),q.set(t)}))}function d(t){p(K,i.products=i.products.filter(((e,n)=>n!==parseInt(t)&&null!=e)).sort(),i)}f((async()=>{u("path=kassa")}));let h=[{title:"Etunimi",type:"text",name:"name1",min:2,max:30,req:1},{title:"Sukunimi",type:"text",name:"name2",min:2,max:30,req:1},{title:"Puhelin",type:"text",name:"phone",min:5,max:15,req:1},{title:"Sähköposti",type:"email",name:"email",min:6,max:100,req:1},{title:"Katuosoite",type:"text",name:"street",min:5,max:50},{title:"Postinumero",type:"text",name:"postal",min:5,max:5},{title:"Kaupunki",type:"text",name:"area",min:3,max:50}];if(window.location.search){let t=window.location.search.substr(1).split("=");c="id"==t[0]?parseInt(t[1]):0}return t.$$.update=()=>{1&t.$$.dirty&&n(1,s=i.total+r.price),2&t.$$.dirty&&n(4,a=.1*s)},n(5,l=""),[i,s,c,o,a,l,r,d,h,async function(t){let e={cart:JSON.stringify(i.products),delivery:JSON.stringify(r),price:s,vat:a};console.log(e),u("path=kassa&payment=1",e)},function(t){i.products[t].amount=T(this.value),K.set(i)},t=>d(t),function(){l=N(this),n(5,l)},function(t){i.customer[t.name]=this.value,K.set(i),n(8,h)}]}export default class extends t{constructor(t){super(),e(this,t,tt,Z,n,{})}}
//# sourceMappingURL=kassa-970087bc.js.map
